(function(e){function t(t){for(var n,i,c=t[0],o=t[1],d=t[2],u=0,m=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);l&&l(t);while(m.length)m.shift()();return s.push.apply(s,d||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,c=1;c<a.length;c++){var o=a[c];0!==r[o]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},s=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/vue2money/dist/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=o;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0af9":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("Toolbar"),a("v-main",[a("v-container",[a("router-view",{attrs:{name:"nav"}}),a("router-view")],1)],1)],1)},s=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-toolbar",{attrs:{dense:""}},[e.loggedIn?a("v-btn",{attrs:{to:"/",text:""}},[e._v(e._s(e.user.email.slice(0,1)))]):e._e(),a("v-btn",{attrs:{to:"/account",text:""}},[e._v("帳戶")]),a("v-btn",{attrs:{to:"/expense",text:""}},[e._v("支出")]),a("v-btn",{attrs:{to:"/expense-tab",text:""}},[e._v("支出明細")]),e.loggedIn?a("v-btn",{attrs:{icon:""},on:{click:e.logout}},[a("v-icon",[e._v("mdi-export")])],1):e._e(),a("v-spacer"),a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-app-bar-nav-icon",e._g(e._b({},"v-app-bar-nav-icon",r,!1),n))]}}])},[a("v-list",[a("v-list-item",[a("v-list-item-title",[a("v-btn",{attrs:{to:"/expense",text:""}},[e._v("支出")])],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-btn",{attrs:{to:"/cate",text:""}},[e._v("Cate")])],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-btn",{attrs:{to:"/expense/gas",text:""}},[e._v("加油")])],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-btn",{attrs:{to:"/spend-tab",text:""}},[e._v("SpendTab")])],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-btn",{attrs:{to:"/cash-in",text:""}},[e._v("Cash In")])],1)],1)],1)],1)],1)],1)},c=[],o=a("1da1"),d=(a("96cf"),a("ac1f"),a("5319"),a("260b")),l=a("ea7b"),u={apiKey:"AIzaSyClLeHQJMt3BzbrK_AHpWeq0nlqzY2r5ik",authDomain:"money-39797.firebaseapp.com",projectId:"money-39797",storageBucket:"money-39797.appspot.com",messagingSenderId:"142963352306",appId:"1:142963352306:web:ac3c09e593009a5175666b",measurementId:"G-012VKYDZ07"};Object(d["a"])(u);var m=Object(l["a"])(),p={data:function(){return{user:{},loggedIn:!1}},created:function(){this.setupFirebase()},computed:{},methods:{setupFirebase:function(){var e=this;m.onAuthStateChanged((function(t){t?(e.loggedIn=!0,e.user=t):(e.loggedIn=!1,e.user={})}))},logout:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("log"),t.next=3,Object(l["c"])(m).then((function(){e.$router.replace("/login")}));case 3:case"end":return t.stop()}}),t)})))()}}},v=p,h=a("2877"),f=a("6544"),b=a.n(f),x=a("5bc1"),w=a("8336"),g=a("132d"),I=a("8860"),O=a("da13"),j=a("5d23"),_=a("e449"),k=a("2fa4"),y=a("71d9"),C=Object(h["a"])(v,i,c,!1,null,null,null),R=C.exports;b()(C,{VAppBarNavIcon:x["a"],VBtn:w["a"],VIcon:g["a"],VList:I["a"],VListItem:O["a"],VListItemTitle:j["c"],VMenu:_["a"],VSpacer:k["a"],VToolbar:y["a"]});var D={name:"App",components:{Toolbar:R},methods:{},created:function(){}},V=D,T=a("7496"),S=a("a523"),E=a("f6c4"),$=Object(h["a"])(V,r,s,!1,null,null,null),M=$.exports;b()($,{VApp:T["a"],VContainer:S["a"],VMain:E["a"]});var B=a("f309");n["a"].use(B["a"]);var F=new B["a"]({}),Y=a("8c4f"),q=(a("d3b7"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{staticClass:"mx-auto my-12",attrs:{elevation:"2","max-width":"374"}},[a("v-card-title",[e._v("Cafe Badilico")]),a("v-card-text",[e.loginFail?a("v-alert",{attrs:{dense:"",outlined:"",type:"error",dismissible:""}},[e._v("登入失敗")]):e._e(),a("v-text-field",{attrs:{label:"帳號"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{label:"密碼",hint:"6個字元以上","persistent-hint":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-btn",{staticClass:"white--text mt-2",attrs:{color:"#003554",disabled:e.loading,loading:e.loading},on:{click:e.login}},[e._v("登入")])],1)],1)],1)}),A=[],U={apiKey:"AIzaSyClLeHQJMt3BzbrK_AHpWeq0nlqzY2r5ik",authDomain:"money-39797.firebaseapp.com",projectId:"money-39797",storageBucket:"money-39797.appspot.com",messagingSenderId:"142963352306",appId:"1:142963352306:web:ac3c09e593009a5175666b",measurementId:"G-012VKYDZ07"},N=(Object(d["a"])(U),Object(l["a"])()),K={data:function(){return{email:"mkdodos@gmail.com",password:"123456",loading:!1,errorMessages:"",loginFail:!1}},methods:{login:function(){var e=this;this.loading=!0,Object(l["b"])(N,this.email,this.password).then((function(){e.$router.replace("/"),e.loading=!1})).catch((function(t){e.loginFail=!0,setTimeout((function(){e.loginFail=!1}),"2000"),console.log(t),e.loading=!1}))}}},L=K,W=a("0798"),z=a("b0af"),H=a("99d9"),P=a("8654"),J=Object(h["a"])(L,q,A,!1,null,null,null),G=J.exports;b()(J,{VAlert:W["a"],VBtn:w["a"],VCard:z["a"],VCardText:H["b"],VCardTitle:H["c"],VTextField:P["a"]});var Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-data-table",{attrs:{headers:e.headers,items:e.rows},scopedSlots:e._u([{key:"item.name",fn:function(t){var n=t.item;return[a("router-link",{attrs:{to:{name:"StockTransaction",params:{id:n.id}}}},[e._v(" "+e._s(n.name)+" ")])]}}])})],1)},Z=[],X={data:function(){return{headers:[{text:"代碼",value:"id"},{text:"名稱",value:"name"}],rows:[{id:"2002",name:"中鋼"},{id:"2603",name:"長榮"},{id:"2330",name:"台積電"},{id:"2412",name:"中華電"}]}}},ee=X,te=a("8fea"),ae=Object(h["a"])(ee,Q,Z,!1,null,null,null),ne=ae.exports;b()(ae,{VDataTable:te["a"]});var re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 lighten-2"},[e._v("編輯")]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"日期",type:"date"},model:{value:e.editedItem.spend_date,callback:function(t){e.$set(e.editedItem,"spend_date",t)},expression:"editedItem.spend_date"}})],1),a("v-col",[a("v-select",{attrs:{label:"分類",items:e.cates},model:{value:e.editedItem.cate_name,callback:function(t){e.$set(e.editedItem,"cate_name",t)},expression:"editedItem.cate_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"項目","hide-details":"auto"},model:{value:e.editedItem.note,callback:function(t){e.$set(e.editedItem,"note",t)},expression:"editedItem.note"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"金額","append-icon":"mdi-currency-usd",type:"number"},model:{value:e.editedItem.expense,callback:function(t){e.$set(e.editedItem,"expense",t)},expression:"editedItem.expense"}})],1)],1)],1),a("v-row",{staticClass:"mb-6"},[a("v-col",{staticClass:"text-left"},[e.editedIndex>-1?a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(e.editedItem.id,e.editedIndex)}}},[e._v("mdi-delete")]):e._e()],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"white--text",attrs:{color:"green"},on:{click:e.save}},[e._v("儲存")])],1)],1)],1)],1)],1),a("v-row",{attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"","append-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),a("v-row",{staticClass:"mb-3",attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"4"}},[a("v-btn",{staticClass:"white--text",attrs:{color:"cyan"},on:{click:e.preDay}},[a("v-icon",[e._v("mdi-arrow-left")])],1)],1),a("v-col",{attrs:{cols:"4"}},[a("v-btn",{staticClass:"white--text",attrs:{color:"cyan"},on:{click:e.nextDay}},[a("v-icon",[e._v("mdi-arrow-right")])],1)],1),a("v-col",{attrs:{cols:"4"}},[a("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey"},on:{click:e.openDialog}},[e._v(" 新增 ")])],1)],1),a("v-card",[a("v-card-title",[a("v-row",{staticClass:"mb-1",attrs:{cols:"4",justify:"space-between"}},[a("v-col",{on:{click:e.nextDay}},[e._v(e._s(new Date(e.today).toISOString().slice(5,10)))]),a("v-col",{attrs:{cols:"4"}},[e._v(e._s(e.getTotal(e.rows)))])],1)],1),a("v-card-text",[a("v-data-table",{attrs:{"items-per-page":100,"hide-default-footer":!0,"mobile-breakpoint":"360",loading:e.loading,headers:e.headers,items:e.rows,search:e.search},on:{"click:row":e.editItem},scopedSlots:e._u([{key:"item.spend_date",fn:function(t){var a=t.item;return[e._v(e._s(a.spend_date.slice(0,10)))]}},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(n)}}},[e._v("mdi-pencil")])]}}])})],1)],1)],1)},se=[],ie=(a("fb6a"),a("b64b"),a("841c"),a("159b"),a("a434"),a("a680")),ce={apiKey:"AIzaSyClLeHQJMt3BzbrK_AHpWeq0nlqzY2r5ik",authDomain:"money-39797.firebaseapp.com",projectId:"money-39797",storageBucket:"money-39797.appspot.com",messagingSenderId:"142963352306",appId:"1:142963352306:web:ac3c09e593009a5175666b",measurementId:"G-012VKYDZ07"},oe=Object(d["a"])(ce),de=Object(ie["g"])(oe),le=de,ue="spends",me={data:function(){return{rows:[],cates:["餐費","加油","水電"],headers:[{text:"項目",value:"note",width:"200"},{text:"金額",value:"expense",width:"90"}],dialog:!1,loading:!0,search:"",editedItem:{note:"",expense:"",spend_date:(new Date).toISOString().slice(0,10)},defaultItem:{note:"",expense:"",spend_date:(new Date).toISOString().slice(0,10)},editedIndex:-1,today:(new Date).getTime(),total:0}},mounted:function(){this.getMoney()},methods:{getTotal:function(e){var t=Object.keys(e).reduce((function(t,a){return t+1*e[a].expense}),0);return t},queryRows:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.headers.push({text:"日期",value:"spend_date",width:"100"}),e.rows=[],e.loading=!0,a=Object(ie["c"])(le,ue),n=Object(ie["j"])(a,Object(ie["l"])("note",">=",e.search),Object(ie["l"])("note","<=",e.search+"")),t.next=7,Object(ie["f"])(n);case 7:r=t.sent,r.forEach((function(t){var a=t.data();a.id=t.id,e.rows.push(a)})),e.loading=!1,console.log("query");case 11:case"end":return t.stop()}}),t)})))()},theDate:function(){return new Date(this.today).toISOString().slice(0,10)},nextDay:function(){this.today=this.today+864e5,this.getMoney(),this.headers.splice(2,1)},preDay:function(){this.today=this.today-864e5,this.getMoney(),this.headers.splice(2,1)},openDialog:function(){this.editedItem=Object.assign({},this.defaultItem),this.dialog=!0},deleteItem:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(confirm("確定刪除")){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(ie["d"])(Object(ie["e"])(le,ue,e));case 4:a.rows.splice(t,1),a.editedItem=Object.assign({},a.defaultItem),a.editedIndex=-1,a.dialog=!1;case 8:case"end":return n.stop()}}),n)})))()},editItem:function(e){this.dialog=!0,this.editedIndex=this.rows.indexOf(e),this.editedItem=Object.assign({},e)},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.editedIndex>-1)){t.next=8;break}return a=Object(ie["e"])(le,ue,e.editedItem.id),t.next=4,Object(ie["k"])(a,e.editedItem);case 4:Object.assign(e.rows[e.editedIndex],e.editedItem),e.$nextTick((function(){e.defaultItem.date="",e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1})),t.next=13;break;case 8:return t.next=10,Object(ie["b"])(Object(ie["c"])(le,ue),{spend_date:e.editedItem.spend_date,cate_name:e.editedItem.cate_name,note:e.editedItem.note,expense:e.editedItem.expense});case 10:n=t.sent,e.editedItem.id=n.id,e.rows.unshift(e.editedItem);case 13:e.dialog=!1;case 14:case"end":return t.stop()}}),t)})))()},getMoney:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rows=[],e.loading=!0,a=Object(ie["c"])(le,ue),n=Object(ie["j"])(a,Object(ie["l"])("spend_date","==",e.theDate())),t.next=6,Object(ie["f"])(n);case 6:r=t.sent,r.forEach((function(t){var a=t.data();a.id=t.id,e.rows.push(a)})),e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()}}},pe=me,ve=a("62ad"),he=a("169a"),fe=a("0fd9"),be=a("b974"),xe=Object(h["a"])(pe,re,se,!1,null,null,null),we=xe.exports;b()(xe,{VBtn:w["a"],VCard:z["a"],VCardText:H["b"],VCardTitle:H["c"],VCol:ve["a"],VContainer:S["a"],VDataTable:te["a"],VDialog:he["a"],VIcon:g["a"],VRow:fe["a"],VSelect:be["a"],VTextField:P["a"]});var ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey"},on:{click:e.openDialog}},[e._v("新增")]),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 lighten-2"},[e._v("編輯")]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"帳戶名稱"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"順序","hide-details":"auto"},model:{value:e.editedItem.prior,callback:function(t){e.$set(e.editedItem,"prior",t)},expression:"editedItem.prior"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"user id"},model:{value:e.editedItem.user_id,callback:function(t){e.$set(e.editedItem,"user_id",t)},expression:"editedItem.user_id"}})],1)],1)],1),a("v-row",{staticClass:"mb-6"},[a("v-col",{staticClass:"text-left"},[e.editedIndex>-1?a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(e.editedItem.id,e.editedIndex)}}},[e._v("mdi-delete")]):e._e()],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"white--text",attrs:{color:"green"},on:{click:e.save}},[e._v("儲存")])],1)],1)],1)],1)],1),a("v-data-table",{attrs:{items:e.rows,"mobile-breakpoint":"360",headers:e.headers},on:{"click:row":e.editItem}}),a("v-data-table",{attrs:{items:e.rowsBalance,"mobile-breakpoint":"360",headers:e.headersBalance}})],1)},Ie=[],Oe=a("5530"),je=(a("4de4"),a("b0c0"),"accounts"),_e={data:function(){return{rows:[],rowsBalance:[],headers:[{text:"名稱",value:"name"},{text:"順序",value:"prior"},{text:"User",value:"user_id"}],headersBalance:[{text:"名稱",value:"name"},{text:"餘額",value:"total"}],dialog:!1,defaultItem:{},editedItem:{},editedIndex:-1}},mounted:function(){this.getData(),this.getBalance()},methods:{deleteItem:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(confirm("確定刪除")){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(ie["d"])(Object(ie["e"])(le,je,e));case 4:a.rows.splice(t,1),a.editedItem=Object.assign({},a.defaultItem),a.editedIndex=-1,a.dialog=!1;case 8:case"end":return n.stop()}}),n)})))()},editItem:function(e){this.dialog=!0,this.editedIndex=this.rows.indexOf(e),this.editedItem=Object.assign({},e),console.log(this.editedIndex)},openDialog:function(){this.editedItem=Object.assign({},this.defaultItem),this.dialog=!0},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.editedIndex>-1)){t.next=12;break}return console.log(e.editedItem.id),a=Object(ie["e"])(le,je,e.editedItem.id),n=Object(l["a"])(),r=n.currentUser,e.editedItem.user_id=r.uid,t.next=8,Object(ie["k"])(a,e.editedItem);case 8:Object.assign(e.rows[e.editedIndex],e.editedItem),e.$nextTick((function(){e.defaultItem.date="",e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1})),t.next=20;break;case 12:return s=Object(l["a"])(),i=s.currentUser,e.editedItem.user_id=i.uid,t.next=17,Object(ie["b"])(Object(ie["c"])(le,je),e.editedItem);case 17:c=t.sent,e.editedItem.id=c.id,e.rows.unshift(e.editedItem);case 20:e.dialog=!1;case 21:case"end":return t.stop()}}),t)})))()},getData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rows=[],a=Object(ie["c"])(le,je),n=Object(ie["j"])(a),r=Object(l["a"])(),s=r.currentUser,"mkdodos@gmail.com"!=s.email&&(n=Object(ie["j"])(a,Object(ie["l"])("user_id","==",s.uid))),t.next=8,Object(ie["f"])(n);case 8:i=t.sent,i.forEach((function(t){e.rows.push(Object(Oe["a"])(Object(Oe["a"])({},t.data()),{},{id:t.id}))}));case 10:case"end":return t.stop()}}),t)})))()},getBalance:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rowsBalance=[],a=Object(ie["c"])(le,"expenses"),t.next=4,Object(ie["f"])(a);case 4:n=t.sent,r=[],n.forEach((function(e){r.push(Object(Oe["a"])({},e.data()))})),console.log(r),e.rows.forEach((function(t){var a=r.filter((function(e){return e.account_name==t.name})),n=a.filter((function(e){return""!=e.income&&null!=e.income})),s=a.filter((function(e){return""!=e.expense&&null!=e.expense})),i=0,c=0;n.forEach((function(e){i+=1*e.income})),s.forEach((function(e){c+=1*e.expense})),e.rowsBalance.push({name:t.name,total:i-c})})),console.log(e.rowsBalance);case 10:case"end":return t.stop()}}),t)})))()}}},ke=_e,ye=Object(h["a"])(ke,ge,Ie,!1,null,null,null),Ce=ye.exports;b()(ye,{VBtn:w["a"],VCard:z["a"],VCardText:H["b"],VCardTitle:H["c"],VCol:ve["a"],VContainer:S["a"],VDataTable:te["a"],VDialog:he["a"],VIcon:g["a"],VRow:fe["a"],VTextField:P["a"]});var Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey"},on:{click:e.openDialog}},[e._v("新增")]),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 lighten-2"},[e._v("編輯")]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"分類"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"順序","hide-details":"auto"},model:{value:e.editedItem.prior,callback:function(t){e.$set(e.editedItem,"prior",t)},expression:"editedItem.prior"}})],1)],1)],1),a("v-row",{staticClass:"mb-6"},[a("v-col",{staticClass:"text-left"},[e.editedIndex>-1?a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(e.editedItem.id,e.editedIndex)}}},[e._v("mdi-delete")]):e._e()],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"white--text",attrs:{color:"green"},on:{click:e.save}},[e._v("儲存")])],1)],1)],1)],1)],1),a("v-data-table",{attrs:{items:e.rows,"mobile-breakpoint":"360",headers:e.headers},on:{"click:row":e.editItem}})],1)},De=[],Ve="cates",Te={data:function(){return{rows:[],headers:[{text:"名稱",value:"name"},{text:"順序",value:"prior"}],dialog:!1,defaultItem:{},editedItem:{},editedIndex:-1}},created:function(){this.getData()},methods:{deleteItem:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(confirm("確定刪除")){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(ie["d"])(Object(ie["e"])(le,Ve,e));case 4:a.rows.splice(t,1),a.editedItem=Object.assign({},a.defaultItem),a.editedIndex=-1,a.dialog=!1;case 8:case"end":return n.stop()}}),n)})))()},editItem:function(e){this.dialog=!0,this.editedIndex=this.rows.indexOf(e),this.editedItem=Object.assign({},e),console.log(this.editedIndex)},openDialog:function(){this.editedItem=Object.assign({},this.defaultItem),this.dialog=!0},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.editedIndex>-1)){t.next=9;break}return console.log(e.editedItem.id),a=Object(ie["e"])(le,Ve,e.editedItem.id),t.next=5,Object(ie["k"])(a,e.editedItem);case 5:Object.assign(e.rows[e.editedIndex],e.editedItem),e.$nextTick((function(){e.defaultItem.date="",e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1})),t.next=14;break;case 9:return t.next=11,Object(ie["b"])(Object(ie["c"])(le,Ve),e.editedItem);case 11:n=t.sent,e.editedItem.id=n.id,e.rows.unshift(e.editedItem);case 14:e.dialog=!1;case 15:case"end":return t.stop()}}),t)})))()},getData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rows=[],a=Object(ie["c"])(le,Ve),n=Object(ie["j"])(a,Object(ie["i"])("prior")),t.next=5,Object(ie["f"])(n);case 5:r=t.sent,r.forEach((function(t){e.rows.push(Object(Oe["a"])(Object(Oe["a"])({},t.data()),{},{id:t.id}))}));case 7:case"end":return t.stop()}}),t)})))()}}},Se=Te,Ee=Object(h["a"])(Se,Re,De,!1,null,null,null),$e=Ee.exports;b()(Ee,{VBtn:w["a"],VCard:z["a"],VCardText:H["b"],VCardTitle:H["c"],VCol:ve["a"],VContainer:S["a"],VDataTable:te["a"],VDialog:he["a"],VIcon:g["a"],VRow:fe["a"],VTextField:P["a"]});var Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",[a("v-col",[a("expense")],1)],1)],1)},Be=[],Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("expenseEditDialog",{attrs:{rows:e.rows,dialog:e.dialog,editedIndex:e.editedIndex,editedItem:e.editedItem,defaultItem:e.defaultItem,incomeOrExpense:"expense"}}),a("v-data-table",{attrs:{"sort-by":e.sortBy,"sort-desc":e.sortDesc,loading:e.loading,"mobile-breakpoint":"300",headers:e.headers,items:e.rows},on:{"click:row":e.editItem,"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}}})],1)},Ye=[],qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey"},on:{click:e.openDialog}},[e._v("新增")]),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 lighten-2"},[e._v("編輯")]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"日期",type:"date"},model:{value:e.editedItem.spend_date,callback:function(t){e.$set(e.editedItem,"spend_date",t)},expression:"editedItem.spend_date"}})],1),a("v-col",[a("v-select",{attrs:{label:"帳戶",items:e.accounts},model:{value:e.editedItem.account_name,callback:function(t){e.$set(e.editedItem,"account_name",t)},expression:"editedItem.account_name"}})],1),a("v-col",[a("v-select",{attrs:{label:"分類",items:e.cates},model:{value:e.editedItem.cate_name,callback:function(t){e.$set(e.editedItem,"cate_name",t)},expression:"editedItem.cate_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"項目","hide-details":"auto"},model:{value:e.editedItem.note,callback:function(t){e.$set(e.editedItem,"note",t)},expression:"editedItem.note"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"金額","append-icon":"mdi-currency-usd",type:"number"},model:{value:e.editedItem.expense,callback:function(t){e.$set(e.editedItem,"expense",t)},expression:"editedItem.expense"}})],1)],1)],1),a("v-row",{staticClass:"mb-6"},[a("v-col",{staticClass:"text-left"},[e.editedIndex>-1?a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(e.editedItem.id,e.editedIndex)}}},[e._v("mdi-delete")]):e._e()],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"white--text",attrs:{color:"green"},on:{click:e.save}},[e._v("儲存")])],1)],1)],1)],1)],1)],1)},Ae=[],Ue=(a("a9e3"),"expenses"),Ne={props:{rows:Array,incomeOrExpense:String,editedIndex:Number},data:function(){return{accounts:["現金","信用卡","土銀"],cates:[],editedItem:{note:"",expense:"",spend_date:(new Date).toISOString().slice(0,10)},defaultItem:{note:"",expense:"",account_name:"現金",cate_name:"餐費",spend_date:(new Date).toISOString().slice(0,10)},dialog:!1}},computed:{},mounted:function(){console.log(this.incomeOrExpense),this.getCates()},methods:{openDialog:function(){this.dialog=!0,this.editedItem=Object.assign({},this.defaultItem)},getCates:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cates=[],a=Object(ie["c"])(le,"cates"),n=Object(ie["j"])(a,Object(ie["i"])("prior")),t.next=5,Object(ie["f"])(n);case 5:r=t.sent,r.forEach((function(t){e.cates.push(t.data().name)}));case 7:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.editedIndex>-1)){t.next=8;break}return a=Object(ie["e"])(le,Ue,e.editedItem.id),t.next=4,Object(ie["k"])(a,e.editedItem);case 4:Object.assign(e.rows[e.editedIndex],e.editedItem),e.$nextTick((function(){e.defaultItem.date="",e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1})),t.next=15;break;case 8:return n={spend_date:e.editedItem.spend_date,cate_name:e.editedItem.cate_name,account_name:e.editedItem.account_name,note:e.editedItem.note},"expense"==e.incomeOrExpense?n.expense=e.editedItem.expense:n.income=e.editedItem.expense,t.next=12,Object(ie["b"])(Object(ie["c"])(le,Ue),n);case 12:r=t.sent,e.editedItem.id=r.id,e.rows.unshift(n);case 15:e.dialog=!1;case 16:case"end":return t.stop()}}),t)})))()},deleteItem:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(confirm("確定刪除")){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(ie["d"])(Object(ie["e"])(le,Ue,e));case 4:a.rows.splice(t,1),a.editedItem=Object.assign({},a.defaultItem),a.editedIndex=-1,a.dialog=!1;case 8:case"end":return n.stop()}}),n)})))()}}},Ke=Ne,Le=Object(h["a"])(Ke,qe,Ae,!1,null,null,null),We=Le.exports;b()(Le,{VBtn:w["a"],VCard:z["a"],VCardText:H["b"],VCardTitle:H["c"],VCol:ve["a"],VContainer:S["a"],VDialog:he["a"],VIcon:g["a"],VRow:fe["a"],VSelect:be["a"],VTextField:P["a"]});var ze={components:{expenseEditDialog:We},data:function(){return{defaultItem:{note:"",expense:"",account_name:"現金",cate_name:"餐費",spend_date:(new Date).toISOString().slice(0,10)},editedItem:{note:"",expense:"",spend_date:(new Date).toISOString().slice(0,10)},editedIndex:-1,sortBy:"spend_date",sortDesc:!0,rows:[],headers:[{text:"日期",value:"spend_date",width:"70"},{text:"項目",value:"note",width:"120"},{text:"支出",value:"expense",width:"70"}],loading:!1,dialog:!1}},methods:{editItem:function(e){this.dialog=!0,this.editedIndex=this.rows.indexOf(e),this.editedItem=Object.assign({},e)},getDataYM:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rows=[],e.loading=!0,a=Object(ie["c"])(le,"expenses"),n=Object(ie["j"])(a,Object(ie["l"])("expense","!=",""),Object(ie["h"])(100)),t.next=6,Object(ie["f"])(n);case 6:r=t.sent,r.forEach((function(t){e.rows.push(Object(Oe["a"])(Object(Oe["a"])({},t.data()),{},{id:t.id}))})),e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()}},created:function(){this.getDataYM()}},He=ze,Pe=Object(h["a"])(He,Fe,Ye,!1,null,null,null),Je=Pe.exports;b()(Pe,{VDataTable:te["a"]});var Ge={components:{expense:Je}},Qe=Ge,Ze=Object(h["a"])(Qe,Me,Be,!1,null,null,null),Xe=Ze.exports;b()(Ze,{VCol:ve["a"],VRow:fe["a"]});var et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 lighten-2"},[e._v("編輯")]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"日期",type:"date"},model:{value:e.editedItem.spend_date,callback:function(t){e.$set(e.editedItem,"spend_date",t)},expression:"editedItem.spend_date"}})],1),a("v-col",[a("v-select",{attrs:{label:"帳戶",items:e.accounts},model:{value:e.editedItem.account_name,callback:function(t){e.$set(e.editedItem,"account_name",t)},expression:"editedItem.account_name"}})],1),a("v-col",[a("v-select",{attrs:{label:"分類",items:e.cates},model:{value:e.editedItem.cate_name,callback:function(t){e.$set(e.editedItem,"cate_name",t)},expression:"editedItem.cate_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"項目","hide-details":"auto"},model:{value:e.editedItem.note,callback:function(t){e.$set(e.editedItem,"note",t)},expression:"editedItem.note"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"金額","append-icon":"mdi-currency-usd",type:"number"},model:{value:e.editedItem.expense,callback:function(t){e.$set(e.editedItem,"expense",t)},expression:"editedItem.expense"}})],1)],1)],1),a("v-row",{staticClass:"mb-6"},[a("v-col",{staticClass:"text-left"},[e.editedIndex>-1?a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(e.editedItem.id,e.editedIndex)}}},[e._v("mdi-delete")]):e._e()],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"white--text",attrs:{color:"green"},on:{click:e.save}},[e._v("儲存")])],1)],1)],1)],1)],1),a("v-row",{attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"","append-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),a("v-row",{staticClass:"mb-3",attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"4"}},[a("v-btn",{staticClass:"white--text",attrs:{color:"cyan"},on:{click:e.preDay}},[a("v-icon",[e._v("mdi-arrow-left")])],1)],1),a("v-col",{attrs:{cols:"4"}},[a("v-btn",{staticClass:"white--text",attrs:{color:"cyan"},on:{click:e.nextDay}},[a("v-icon",[e._v("mdi-arrow-right")])],1)],1),a("v-col",{attrs:{cols:"4"}},[a("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey"},on:{click:e.openDialog}},[e._v("新增")])],1)],1),a("v-card",[a("v-card-title",[a("v-row",{staticClass:"mb-1",attrs:{justify:"space-between"}},[a("v-col",[e._v(" 現金 "+e._s(e.numFormat(e.balance))+" ")]),a("v-col",{attrs:{cols:"5"},on:{click:function(t){e.dialogType=!0}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-calendar")]),e._v(" "+e._s(e.numFormat(e.getTotal(e.rowsMonth)))+" ")],1)],1)],1),a("v-card-text",[a("v-row"),a("v-data-table",{attrs:{"items-per-page":100,"hide-default-footer":!0,"mobile-breakpoint":"360",loading:e.loading,headers:e.headers,items:e.rows,search:e.search},on:{"click:row":e.editItem},scopedSlots:e._u([{key:"header.note",fn:function(t){return[e._v(e._s(new Date(e.today).toISOString().slice(5,10)))]}},{key:"header.expense",fn:function(t){return[e._v(e._s(e.numFormat(e.getTotal(e.rows))))]}},{key:"item.spend_date",fn:function(t){var a=t.item;return[e._v(e._s(a.spend_date.slice(0,10)))]}},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(n)}}},[e._v("mdi-pencil")])]}}])})],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialogType,callback:function(t){e.dialogType=t},expression:"dialogType"}},[a("v-data-table",{attrs:{"sort-by":"total","sort-desc":!0,"items-per-page":100,"hide-default-footer":!0,"mobile-breakpoint":"360",loading:e.loading,headers:e.headersType,items:e.rowsMonthCates}})],1)],1)},tt=[],at="expenses",nt={watch:{rows:function(){this.getBalance()}},data:function(){return{balance:0,rowsMonth:[],rowsMonthCates:[],rows:[],accounts:["現金","信用卡"],cates:["餐費","加油","水電"],headers:[{text:"項目",value:"note",width:"120"},{text:"abc",value:"expense",width:"60"}],headersType:[{text:"項目",value:"cate",width:"180"},{text:"金額",value:"total",width:"60"}],dialog:!1,dialogType:!1,loading:!0,search:"",editedItem:{note:"",expense:"",spend_date:(new Date).toISOString().slice(0,10)},defaultItem:{note:"",expense:"",account_name:"現金",cate_name:"餐費",spend_date:(new Date).toISOString().slice(0,10)},editedIndex:-1,today:(new Date).getTime(),total:0}},mounted:function(){this.getMoney(),this.getCates(),this.getRowsMonth(),this.getBalance()},methods:{getBalance:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=Object(ie["c"])(le,"expenses"),n=Object(ie["j"])(a,Object(ie["l"])("account_name","==","現金")),t.next=5,Object(ie["f"])(n);case 5:r=t.sent,s=0,i=0,r.forEach((function(e){e.data().income&&(s+=1*e.data().income),e.data().expense&&(i+=1*e.data().expense)})),e.balance=s-i,t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),e.loading=!1,console.log("Error getting document:",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()},numFormat:function(e){var t=new Intl.NumberFormat("en-US",{currency:"USD"});return t.format(e)},getRowsMonth:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rowsMonth=[],e.rowsMonthCates=[],a=(new Date).getMonth()+1,a<10&&(a="0"+a),console.log(a),n=Object(ie["c"])(le,at),r=Object(ie["j"])(n,Object(ie["i"])("spend_date","desc"),Object(ie["l"])("spend_date",">=","2022-"+a+"-01"),Object(ie["l"])("spend_date","<=","2022-"+a+"-31")),t.next=9,Object(ie["f"])(r);case 9:s=t.sent,s.forEach((function(t){var a=t.data();a.id=t.id,e.rowsMonth.push(a)})),e.rowsMonth=e.rowsMonth.filter((function(e){return"轉帳"!=e.trans_type})),e.rowsMonth=e.rowsMonth.filter((function(e){return"投資"!=e.trans_type})),e.cates.forEach((function(t){var a=e.rowsMonth.filter((function(e){return e.cate_name==t})),n=0;a.forEach((function(e){n+=1*e.expense})),n>0&&e.rowsMonthCates.push({total:n,cate:t})}));case 14:case"end":return t.stop()}}),t)})))()},getCates:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cates=[],a=Object(ie["c"])(le,"cates"),n=Object(ie["j"])(a,Object(ie["i"])("prior")),t.next=5,Object(ie["f"])(n);case 5:r=t.sent,r.forEach((function(t){e.cates.push(t.data().name)}));case 7:case"end":return t.stop()}}),t)})))()},getTotal:function(e){var t=Object.keys(e).reduce((function(t,a){return t+1*e[a].expense}),0);return t},queryRows:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.headers.push({text:"日期",value:"spend_date",width:"100"}),e.rows=[],e.loading=!0,a=Object(ie["c"])(le,at),n=Object(ie["j"])(a,Object(ie["l"])("note",">=",e.search),Object(ie["l"])("note","<=",e.search+"")),t.next=7,Object(ie["f"])(n);case 7:r=t.sent,r.forEach((function(t){var a=t.data();a.id=t.id,e.rows.push(a)})),e.loading=!1;case 10:case"end":return t.stop()}}),t)})))()},theDate:function(){return new Date(this.today).toISOString().slice(0,10)},nextDay:function(){this.today=this.today+864e5,this.getMoney(),this.headers.splice(2,1)},preDay:function(){this.today=this.today-864e5,this.getMoney(),this.headers.splice(2,1)},openDialog:function(){this.editedItem=Object.assign({},this.defaultItem),this.dialog=!0},deleteItem:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(confirm("確定刪除")){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(ie["d"])(Object(ie["e"])(le,at,e));case 4:a.rows.splice(t,1),a.rowsMonth.splice(t,1),a.editedItem=Object.assign({},a.defaultItem),a.editedIndex=-1,a.dialog=!1;case 9:case"end":return n.stop()}}),n)})))()},editItem:function(e){this.dialog=!0,this.editedIndex=this.rows.indexOf(e),this.editedItem=Object.assign({},e)},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.editedIndex>-1)){t.next=9;break}return a=Object(ie["e"])(le,at,e.editedItem.id),t.next=4,Object(ie["k"])(a,e.editedItem);case 4:Object.assign(e.rows[e.editedIndex],e.editedItem),Object.assign(e.rowsMonth[e.editedIndex],e.editedItem),e.$nextTick((function(){e.getBalance(),e.getRowsMonth(),e.defaultItem.date="",e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1})),t.next=16;break;case 9:return t.next=11,Object(ie["b"])(Object(ie["c"])(le,at),{spend_date:e.editedItem.spend_date,cate_name:e.editedItem.cate_name,account_name:e.editedItem.account_name,note:e.editedItem.note,expense:e.editedItem.expense});case 11:n=t.sent,e.editedItem.id=n.id,e.rows.unshift(e.editedItem),e.rowsMonth.unshift(e.editedItem),console.log(e.rowsMonth);case 16:e.dialog=!1;case 17:case"end":return t.stop()}}),t)})))()},getMoney:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rows=[],e.loading=!0,a=Object(ie["c"])(le,at),n=Object(ie["j"])(a,Object(ie["l"])("spend_date","==",e.theDate()),Object(ie["l"])("expense","!=","")),t.next=6,Object(ie["f"])(n);case 6:r=t.sent,r.forEach((function(t){var a=t.data();a.id=t.id,e.rows.push(a)})),e.rows=e.rows.filter((function(e){return"轉帳"!=e.trans_type})),e.rows=e.rows.filter((function(e){return"投資"!=e.trans_type})),e.loading=!1;case 11:case"end":return t.stop()}}),t)})))()}}},rt=nt,st=Object(h["a"])(rt,et,tt,!1,null,null,null),it=st.exports;b()(st,{VBtn:w["a"],VCard:z["a"],VCardText:H["b"],VCardTitle:H["c"],VCol:ve["a"],VContainer:S["a"],VDataTable:te["a"],VDialog:he["a"],VIcon:g["a"],VRow:fe["a"],VSelect:be["a"],VTextField:P["a"]});var ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",{staticClass:"mt-2"},[a("v-btn",{staticClass:"ma-2",attrs:{color:"orange darken-2",dark:""},on:{click:e.goBack}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-arrow-left")]),e._v("Back ")],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"項目"},model:{value:e.editedRow.note,callback:function(t){e.$set(e.editedRow,"note",t)},expression:"editedRow.note"}})],1),a("v-col",[a("v-text-field",{attrs:{label:"KM"},model:{value:e.editedRow.km,callback:function(t){e.$set(e.editedRow,"km",t)},expression:"editedRow.km"}})],1),a("v-col",[a("v-text-field",{attrs:{type:"number",label:"price"},model:{value:e.editedRow.price,callback:function(t){e.$set(e.editedRow,"price",t)},expression:"editedRow.price"}})],1),a("v-col",[a("v-text-field",{attrs:{type:"number",label:"qty"},model:{value:e.editedRow.qty,callback:function(t){e.$set(e.editedRow,"qty",t)},expression:"editedRow.qty"}})],1),a("v-col",[a("v-btn",{staticClass:"ma-2",attrs:{color:"darken-2",dark:""},on:{click:e.save}},[e._v("Save")])],1)],1),a("v-row",{staticClass:"mt-3"},[a("v-col",[a("v-data-table",{attrs:{"mobile-breakpoint":"300",headers:e.headers,items:e.rows,"items-per-page":100},on:{"click:row":e.editItem},scopedSlots:e._u([{key:"item.spend_date",fn:function(t){var a=t.item;return[e._v(e._s(a.spend_date.slice(5,10)))]}}])})],1),a("v-col",e._l(e.rows,(function(t,n){return a("v-timeline",{key:n,attrs:{"align-top":"",dense:""}},[a("v-timeline-item",{attrs:{color:"pink",small:""}},[a("v-row",{staticClass:"pt-1"},[a("v-col",{attrs:{cols:"3"}},[a("strong",[e._v(e._s(t.km)+" KM")])])],1)],1)],1)})),1)],1)],1)},ot=[],dt={data:function(){return{rows:[],headers:[{text:"日期",value:"spend_date",width:"70"},{text:"項目",value:"note",width:"80"},{text:"單價$",value:"price",width:"60"},{text:"公升",value:"qty",width:"20"},{text:"支出",value:"expense",width:"70"}],editedRow:{},defaultItem:{},editedIndex:-1}},created:function(){this.getDataYM()},methods:{editItem:function(e){this.editedIndex=this.rows.indexOf(e),this.editedRow=Object.assign({},e),console.log(e)},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(ie["e"])(le,"expenses",e.editedRow.id),t.next=3,Object(ie["k"])(a,e.editedRow);case 3:Object.assign(e.rows[e.editedIndex],e.editedRow),e.$nextTick((function(){e.editedRow=Object.assign({},e.defaultItem),e.editedIndex=-1}));case 5:case"end":return t.stop()}}),t)})))()},goBack:function(){this.$router.go(-1)},getDataYM:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rows=[],a=Object(ie["c"])(le,"expenses"),console.log(e.$route.params.y),n=Object(ie["j"])(a,Object(ie["i"])("spend_date","desc"),Object(ie["l"])("spend_date",">=",e.$route.params.y+"-01-01"),Object(ie["l"])("spend_date","<=",e.$route.params.y+"-12-31"),Object(ie["l"])("cate_name","==","加油"),Object(ie["h"])(100)),void 0!=e.$route.params.m&&(n=Object(ie["j"])(a,Object(ie["i"])("spend_date","desc"),Object(ie["l"])("spend_date",">=",e.$route.params.y+"-"+e.$route.params.m+"-01"),Object(ie["l"])("spend_date","<=",e.$route.params.y+"-"+e.$route.params.m+"-31"),Object(ie["l"])("cate_name","==","加油"),Object(ie["h"])(100))),t.next=7,Object(ie["f"])(n);case 7:r=t.sent,r.forEach((function(t){e.rows.push(Object(Oe["a"])(Object(Oe["a"])({},t.data()),{},{id:t.id}))})),console.log(e.rows);case 10:case"end":return t.stop()}}),t)})))()}}},lt=dt,ut=a("8414"),mt=a("1e06"),pt=Object(h["a"])(lt,ct,ot,!1,null,null,null),vt=pt.exports;b()(pt,{VBtn:w["a"],VCol:ve["a"],VDataTable:te["a"],VIcon:g["a"],VRow:fe["a"],VTextField:P["a"],VTimeline:ut["a"],VTimelineItem:mt["a"]});var ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",[a("v-col",{attrs:{cols:"6"}}),a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{color:"orange",dark:""},on:{click:e.showDetailY}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-currency-usd")]),e._v(" "+e._s(e.yearTotal)+" ")],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-data-table",{attrs:{"hide-default-footer":!0,"items-per-page":100,"mobile-breakpoint":"300",headers:e.headers2022,items:e.rowsYM,loading:e.loading,"sort-desc":e.sortDesc},on:{"click:row":e.showDetail,"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"item.amt",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{outlined:"",color:"red",dark:""}},[e._v(e._s(n.amt))])]}}])})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("BarChart",{attrs:{"chart-data":e.chartData}})],1)],1)],1)},ft=[],bt=(a("caad"),a("2532"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Bar",{attrs:{"chart-options":e.chartOptions,"chart-data":e.chartData,"chart-id":e.chartId,"dataset-id-key":e.datasetIdKey,plugins:e.plugins,"css-classes":e.cssClasses,styles:e.styles,width:e.width,height:e.height}})}),xt=[],wt=a("7b97"),gt=a("9b4a");gt["e"].register(gt["n"],gt["o"],gt["g"],gt["b"],gt["d"],gt["i"]);var It={name:"BarChart",components:{Bar:wt["a"]},props:{chartId:{type:String,default:"bar-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{default:"",type:String},styles:{type:Object,default:function(){}},plugins:{type:Object,default:function(){}},chartData:{type:Object,default:function(){}}},data:function(){return{chartData1:{labels:["January","February","March","april"],datasets:[{label:"里程",data:[40,20,12,30],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},chartOptions:{responsive:!0}}}},Ot=It,jt=Object(h["a"])(Ot,bt,xt,!1,null,null,null),_t=jt.exports,kt={components:{BarChart:_t},props:{title:{type:String,default:"expenses"}},data:function(){return{chch:[400,20,12,30],chartData:{labels:[],datasets:[{label:"里程",data:[],backgroundColor:["rgba(255, 99, 132, 0.2)"],borderColor:["rgba(255, 99, 132, 1)"],borderWidth:1},{label:"支出",data:[],backgroundColor:["rgba(54, 162, 235, 0.2)"],borderColor:["rgba(54, 162, 235, 1)"],borderWidth:1}]},yearTotal:0,rows2022:[],rowsYM:[],rowsMonthTotal:[],sortBy:"m",sortDesc:!0,editedIndex:-1,dialog:!1,search:{y:(new Date).getFullYear(),m:(new Date).getMonth()+1},months:[],accounts:["","現金","信用卡"],rows:[],headers2022:[{text:"年",value:"y",width:"70"},{text:"月",value:"m",width:"70"},{text:"里程",value:"km",width:"70"},{text:"支出",value:"amt",width:"70"}],loading:!1}},created:function(){this.getYearData("2022"),this.loading=!1},methods:{getYearData:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,c,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=Object(ie["c"])(le,"expenses"),r=Object(ie["j"])(n,Object(ie["i"])("spend_date","desc"),Object(ie["l"])("spend_date",">=",e+"-01-01"),Object(ie["l"])("spend_date","<=",e+"-12-31"),Object(ie["l"])("cate_name","==","加油"),Object(ie["h"])(100)),a.next=4,Object(ie["f"])(r);case 4:for(s=a.sent,s.forEach((function(e){var a={};a.date=e.data().spend_date,a.amt=e.data().expense,a.km=e.data().km,t.rows.push(a)})),i=[],c=function(a){a<10&&(a="0"+a);var n=e+"-"+a;i=t.rows.filter((function(e){return e.date.includes(n)}));var r=0,s=0;i.forEach((function(e){r+=1*e.amt}));for(var c=0;c<i.length-1;c++)void 0!=i[c].km&&(s+=i[c].km-i[c+1].km);t.yearTotal+=r;var d={};d.y=e,d.m=a,d.amt=r,d.km=s,r>0&&(t.rowsYM.push(d),t.chartData.datasets[0].data.push(s),t.chartData.datasets[1].data.push(r),t.chartData.labels.push(a)),o=a},o=1;o<=12;o++)c(o);case 9:case"end":return a.stop()}}),a)})))()},showDetail:function(e){this.$router.push({name:"ExpenseDetail",params:{y:e.y,m:e.m}}),console.log(e),this.search.m=e.m},showDetailY:function(e){this.$router.push({name:"ExpenseDetail",params:{y:"2022"}}),this.search.m=e.m},getTotal:function(e){var t=Object.keys(e).reduce((function(t,a){return t+1*e[a].expense}),0),a=new Intl.NumberFormat("en-US",{currency:"USD"});return t=a.format(t),t},getRows2022:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,s,i,c,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=Object(ie["c"])(le,a.title),s=Object(ie["j"])(r,Object(ie["i"])("spend_date","desc"),Object(ie["l"])("spend_date",">=",e+"-"+t+"-01"),Object(ie["l"])("spend_date","<=",e+"-"+t+"-31"),Object(ie["l"])("cate_name","==","加油"),Object(ie["h"])(100)),n.next=4,Object(ie["f"])(s);case 4:i=n.sent,a.rows2022=[],i.forEach((function(e){a.rows2022.push(e.data().expense)})),c=0,a.rows2022.forEach((function(e){c+=1*e})),o={},o.y=e,o.m=t,o.amt=c,a.rowsMonthTotal.push(o);case 14:case"end":return n.stop()}}),n)})))()}}},yt=kt,Ct=Object(h["a"])(yt,ht,ft,!1,null,null,null),Rt=Ct.exports;b()(Ct,{VBtn:w["a"],VCol:ve["a"],VDataTable:te["a"],VIcon:g["a"],VRow:fe["a"]});var Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ExpenseTab",{attrs:{title:"ExpenseDada"}})},Vt=[],Tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 lighten-2"},[a("v-row",{attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"4"}},[e._v("編輯")]),a("v-col",{attrs:{cols:"2"}},[a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1)],1)],1),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"日期",type:"date"},model:{value:e.editedItem.spend_date,callback:function(t){e.$set(e.editedItem,"spend_date",t)},expression:"editedItem.spend_date"}})],1),a("v-col",[a("v-select",{attrs:{items:e.types,label:"類型"},model:{value:e.editedItem.trans_type,callback:function(t){e.$set(e.editedItem,"trans_type",t)},expression:"editedItem.trans_type"}})],1)],1),a("v-row",[a("v-col",[a("v-radio-group",{attrs:{row:""},model:{value:e.incomeOrExpense,callback:function(t){e.incomeOrExpense=t},expression:"incomeOrExpense"}},[a("v-radio",{attrs:{color:"red",value:"income",label:"收入"}}),a("v-radio",{attrs:{value:"expense",label:"支出"}})],1)],1)],1),a("v-row",[a("v-col",[a("v-select",{attrs:{label:"帳戶",items:e.accounts},model:{value:e.editedItem.account_name,callback:function(t){e.$set(e.editedItem,"account_name",t)},expression:"editedItem.account_name"}})],1),a("v-col",[a("v-select",{attrs:{label:"分類",items:e.cates},model:{value:e.editedItem.cate_name,callback:function(t){e.$set(e.editedItem,"cate_name",t)},expression:"editedItem.cate_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"項目","hide-details":"auto"},model:{value:e.editedItem.note,callback:function(t){e.$set(e.editedItem,"note",t)},expression:"editedItem.note"}})],1),"income"==e.incomeOrExpense?a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"收入金額","append-icon":"mdi-currency-usd",type:"number"},model:{value:e.editedItem.income,callback:function(t){e.$set(e.editedItem,"income",t)},expression:"editedItem.income"}})],1):e._e(),"expense"==e.incomeOrExpense?a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"支出金額","append-icon":"mdi-currency-usd",type:"number"},model:{value:e.editedItem.expense,callback:function(t){e.$set(e.editedItem,"expense",t)},expression:"editedItem.expense"}})],1):e._e()],1)],1),a("v-row",{staticClass:"mb-6"},[a("v-col",{staticClass:"text-left"},[e.editedIndex>-1?a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(e.editedItem.id,e.editedIndex)}}},[e._v("mdi-delete")]):e._e()],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"white--text",attrs:{color:"green"},on:{click:e.save}},[e._v("儲存")])],1)],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{type:"number",label:"年"},model:{value:e.search.y,callback:function(t){e.$set(e.search,"y",t)},expression:"search.y"}})],1),a("v-col",[a("v-select",{attrs:{items:e.months},model:{value:e.search.m,callback:function(t){e.$set(e.search,"m",t)},expression:"search.m"}})],1),a("v-col",[a("v-select",{attrs:{items:e.types,label:"類型"},model:{value:e.search.trans_type,callback:function(t){e.$set(e.search,"trans_type",t)},expression:"search.trans_type"}})],1)],1),a("v-row",[a("v-col",[a("v-select",{attrs:{label:"帳戶",items:e.accounts},model:{value:e.search.account_name,callback:function(t){e.$set(e.search,"account_name",t)},expression:"search.account_name"}})],1),a("v-col",[a("v-select",{attrs:{label:"分類",items:e.cates,"return-object":"","item-text":"name","item-value":"id"},model:{value:e.search.cate_name,callback:function(t){e.$set(e.search,"cate_name",t)},expression:"search.cate_name"}})],1),a("v-col",[a("v-btn",{on:{click:e.getDataYM}},[e._v("查詢")])],1)],1),a("v-row",[a("v-col",{attrs:{cols:"8"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify"},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}})],1),a("v-col",[a("v-btn",{on:{click:e.switchInOut}},[e._v("收支切換")])],1)],1),a("v-row",{attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"4"}},[a("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey"},on:{click:e.openDialog}},[e._v("新增")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-btn",{attrs:{outlined:"",color:e.totalColor,dark:""}},[e.isExpense?a("span",[e._v("-")]):a("span",[e._v("+")]),e._v(" "+e._s(e.getTotal(e.rows))+" ")])],1)],1),a("v-data-table",{attrs:{"mobile-breakpoint":"300",headers:e.headers,items:e.rows,search:e.search.keyword,loading:e.loading,"items-per-page":100,"sort-by":e.sortBy,"sort-desc":e.sortDesc},on:{"click:row":e.editItem,"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"item.spend_date",fn:function(t){var a=t.item;return[e._v(e._s(a.spend_date.slice(5,10)))]}},{key:"item.note",fn:function(t){var a=t.item;return[e._v(e._s(e.getNoteCate(a)))]}},{key:"item.amt",fn:function(t){var a=t.item;return[e._v(e._s(e.getAmt(a)))]}}])})],1)},St=[],Et=(a("99af"),"expenses"),$t={props:{title:{type:String,default:"expenses"}},computed:{totalColor:function(){return this.isExpense?"red":"blue"}},data:function(){return{isExpense:!0,types:["一般","轉帳","投資"],incomeOrExpense:"expense",sortBy:"spend_date",sortDesc:!0,editedIndex:-1,dialog:!1,defaultItem:{account_name:"現金",cate_name:"餐費",note:"",expense:"",spend_date:(new Date).toISOString().slice(0,10)},editedItem:{},search:{y:(new Date).getFullYear(),m:(new Date).getMonth()+1},months:[],accounts:[],cates:["餐費","加油","旅遊","水電"],rows:[],headers:[{text:"日期",value:"spend_date",width:"70"},{text:"項目",value:"note",width:"120"},{text:"金額",value:"amt",width:"70"}],loading:!1,switchColsFlag:!1}},created:function(){this.monthData(),this.getDataYM(),this.getAccounts(),this.getCates()},methods:{switchInOut:function(){this.isExpense=!this.isExpense,this.getDataYM()},getAmt:function(e){return this.isExpense?e.expense:e.income},getNoteCate:function(e){return e.note?e.note:"[ "+e.cate_name+" ]"},switchCols:function(){var e={text:"帳戶",value:"account_name",width:"60"},t={text:"收入",value:"income",width:"90"},a={text:"分類",value:"cate_name",width:"60"},n={text:"type",value:"trans_type",width:"60"};this.switchColsFlag?(this.headers.splice(0,1),this.headers.splice(0,1),this.headers.splice(0,1),this.headers.splice(0,1)):(this.headers.splice(0,0,n),this.headers.splice(0,0,t),this.headers.splice(0,0,a),this.headers.splice(0,0,e)),this.switchColsFlag=!this.switchColsFlag,console.log("switch")},editItem:function(e){this.dialog=!0,e.income?this.incomeOrExpense="income":this.incomeOrExpense="expense",this.editedIndex=this.rows.indexOf(e),this.editedItem=Object.assign({},e)},getBalance:function(e){var t=0,a=Object.keys(e).reduce((function(t,a){return e[a].income?t+1*e[a].income:t+0}),0),n=Object.keys(e).reduce((function(t,a){return e[a].expense?t+1*e[a].expense:t+0}),0);t=a-n;var r=new Intl.NumberFormat("en-US",{currency:"USD"});return t=r.format(t),t},getTotal:function(e){var t=0;t=this.isExpense?Object.keys(e).reduce((function(t,a){return e[a].expense?t+1*e[a].expense:t+0}),0):Object.keys(e).reduce((function(t,a){return e[a].income?t+1*e[a].income:t+0}),0);var a=new Intl.NumberFormat("en-US",{currency:"USD"});return t=a.format(t),t},getTotalIncome:function(e){var t=Object.keys(e).reduce((function(t,a){return e[a].income?t+1*e[a].income:t+0}),0),a=new Intl.NumberFormat("en-US",{currency:"USD"});return t=a.format(t),t},monthData:function(){for(var e=1;e<=12;e++)e<10&&(e="0"+e),this.months.push(e);var t=(new Date).getMonth()+1;t<10&&(t="0"+t),this.months.unshift(""),this.search.m=t},openDialog:function(){this.defaultItem.account_name=this.search.account_name,this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1,this.incomeOrExpense="expense",this.dialog=!0},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.editedIndex>-1)){t.next=9;break}return a=Object(ie["e"])(le,Et,e.editedItem.id),t.next=4,Object(ie["k"])(a,e.editedItem);case 4:Object.assign(e.rows[e.editedIndex],e.editedItem),console.log(e.editedItem),e.$nextTick((function(){e.defaultItem.date="",e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1})),t.next=14;break;case 9:return t.next=11,Object(ie["b"])(Object(ie["c"])(le,Et),e.editedItem);case 11:n=t.sent,e.editedItem.id=n.id,e.rows.unshift(e.editedItem);case 14:e.dialog=!1;case 15:case"end":return t.stop()}}),t)})))()},deleteItem:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(confirm("確定刪除")){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(ie["d"])(Object(ie["e"])(le,Et,e));case 4:a.rows.splice(t,1),a.editedItem=Object.assign({},a.defaultItem),a.editedIndex=-1,a.dialog=!1;case 8:case"end":return n.stop()}}),n)})))()},getAccounts:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.accounts=[],a=Object(ie["c"])(le,"accounts"),n=Object(ie["j"])(a,Object(ie["i"])("prior")),t.next=5,Object(ie["f"])(n);case 5:r=t.sent,r.forEach((function(t){e.accounts.push(t.data().name)})),e.accounts.unshift("");case 8:case"end":return t.stop()}}),t)})))()},getCates:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cates=[],a=Object(ie["c"])(le,"cates"),n=Object(ie["j"])(a,Object(ie["i"])("prior")),t.next=5,Object(ie["f"])(n);case 5:r=t.sent,r.forEach((function(t){e.cates.push(t.data().name)})),e.cates.unshift("");case 8:case"end":return t.stop()}}),t)})))()},getDataByCate:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i,c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.rows=[],e.loading=!0,a=Object(ie["c"])(le,Et),n="",r=e.search.cate_name,s=e.search.account_name,i=""!=r&&void 0!=r,c=""!=s&&void 0!=s,i&&!c&&(console.log("cate"),n=Object(ie["j"])(a,Object(ie["l"])("cate_name","==",e.search.cate_name),Object(ie["h"])(100))),!i&&c&&(console.log("acc"),n=Object(ie["j"])(a,Object(ie["l"])("account_name","==",e.search.account_name))),i&&c&&(n=Object(ie["j"])(a,Object(ie["l"])("cate_name","==",e.search.cate_name),Object(ie["l"])("account_name","==",e.search.account_name))),i||c){t.next=14;break}return e.loading=!1,t.abrupt("return");case 14:return t.next=16,Object(ie["f"])(n);case 16:o=t.sent,o.forEach((function(t){e.rows.push(Object(Oe["a"])(Object(Oe["a"])({},t.data()),{},{id:t.id}))})),e.loading=!1;case 19:case"end":return t.stop()}}),t)})))()},getDataYM:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i,c,o,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.rows=[],a=[],n=e.search.cate_name,r=e.search.account_name,s=e.search.y,i=e.search.m,c=Object(ie["c"])(le,Et),a.push(Object(ie["i"])("spend_date","desc")),null!=s&&""!=s&&(a.push(Object(ie["l"])("spend_date",">=",s+"-01-01")),a.push(Object(ie["l"])("spend_date","<=",s+"-12-31"))),null!=i&&""!=i&&(a.push(Object(ie["l"])("spend_date",">=",s+"-"+i+"-01")),a.push(Object(ie["l"])("spend_date","<=",s+"-"+i+"-31"))),null!=n&&""!=n&&a.push(Object(ie["l"])("cate_name","==",e.search.cate_name)),null!=r&&""!=r&&a.push(Object(ie["l"])("account_name","==",e.search.account_name)),o=ie["j"].apply(void 0,[c].concat(a)),t.next=16,Object(ie["f"])(o);case 16:d=t.sent,d.forEach((function(t){e.rows.push(Object(Oe["a"])(Object(Oe["a"])({},t.data()),{},{id:t.id}))})),"一般"!=e.search.trans_type&&e.search.trans_type?e.rows=e.rows.filter((function(t){return t.trans_type==e.search.trans_type})):(e.rows=e.rows.filter((function(e){return"轉帳"!=e.trans_type})),e.rows=e.rows.filter((function(e){return"投資"!=e.trans_type}))),e.isExpense?e.rows=e.rows.filter((function(e){return""!=e.expense})):e.rows=e.rows.filter((function(e){return void 0!=e.income&&""!=e.income})),e.loading=!1;case 21:case"end":return t.stop()}}),t)})))()}}},Mt=$t,Bt=a("67b6"),Ft=a("43a6"),Yt=Object(h["a"])(Mt,Tt,St,!1,null,null,null),qt=Yt.exports;b()(Yt,{VBtn:w["a"],VCard:z["a"],VCardText:H["b"],VCardTitle:H["c"],VCol:ve["a"],VContainer:S["a"],VDataTable:te["a"],VDialog:he["a"],VIcon:g["a"],VRadio:Bt["a"],VRadioGroup:Ft["a"],VRow:fe["a"],VSelect:be["a"],VTextField:P["a"]});var At={components:{ExpenseTab:qt}},Ut=At,Nt=Object(h["a"])(Ut,Dt,Vt,!1,null,null,null),Kt=Nt.exports,Lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-app",[a("v-container",[a("v-row",[a("v-col",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),a("v-row",[a("v-col",[a("v-data-table",{attrs:{headers:e.headers,items:e.rows,search:e.search}})],1)],1)],1)],1)],1)},Wt=[],zt="cates",Ht={data:function(){return{search:"",rows:[],headers:[{text:"user",value:"user_sn",width:"100"},{text:"類別",value:"cate_id",width:"100"},{text:"cate",value:"cate_name",width:"100"}]}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(ie["c"])(le,zt),t.next=3,Object(ie["f"])(a);case 3:n=t.sent,n.forEach((function(t){e.rows.push(Object(Oe["a"])(Object(Oe["a"])({},t.data()),{},{id:t.id}))}));case 5:case"end":return t.stop()}}),t)})))()}}},Pt=Ht,Jt=Object(h["a"])(Pt,Lt,Wt,!1,null,null,null),Gt=Jt.exports;b()(Jt,{VApp:T["a"],VCol:ve["a"],VContainer:S["a"],VDataTable:te["a"],VRow:fe["a"],VTextField:P["a"]});var Qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 lighten-2"},[e._v("編輯")]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"日期",type:"date"},model:{value:e.editedItem.spend_date,callback:function(t){e.$set(e.editedItem,"spend_date",t)},expression:"editedItem.spend_date"}})],1),a("v-col",[a("v-select",{attrs:{label:"分類",items:e.cates},model:{value:e.editedItem.cate_name,callback:function(t){e.$set(e.editedItem,"cate_name",t)},expression:"editedItem.cate_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"項目","hide-details":"auto"},model:{value:e.editedItem.note,callback:function(t){e.$set(e.editedItem,"note",t)},expression:"editedItem.note"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"金額","append-icon":"mdi-currency-usd",type:"number"},model:{value:e.editedItem.expense,callback:function(t){e.$set(e.editedItem,"expense",t)},expression:"editedItem.expense"}})],1)],1)],1),a("v-row",{staticClass:"mb-6"},[a("v-col",{staticClass:"text-left"},[e.editedIndex>-1?a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(e.editedItem.id,e.editedIndex)}}},[e._v("mdi-delete")]):e._e()],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"white--text",attrs:{color:"green"},on:{click:e.save}},[e._v("儲存")])],1)],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{type:"number",label:"年"},model:{value:e.search.y,callback:function(t){e.$set(e.search,"y",t)},expression:"search.y"}})],1),a("v-col",[a("v-select",{attrs:{items:e.months},model:{value:e.search.m,callback:function(t){e.$set(e.search,"m",t)},expression:"search.m"}})],1),a("v-col",[a("v-btn",{on:{click:e.getDataYM}},[e._v("查詢")])],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify"},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"2"}}),a("v-col",{staticClass:"text-right",attrs:{cols:"8"}},[a("v-chip",{staticClass:"ma-2"},[e._v(e._s(e.getTotal(e.rows)))])],1)],1),a("v-data-table",{attrs:{"mobile-breakpoint":"300",headers:e.headers,items:e.rows,search:e.search.keyword,loading:e.loading},on:{"click:row":e.editItem},scopedSlots:e._u([{key:"item.spend_date",fn:function(t){var a=t.item;return[e._v(e._s(a.spend_date.slice(5,10)))]}}])})],1)},Zt=[],Xt={data:function(){return{editedIndex:-1,dialog:!1,defaultItem:{note:"",expense:"",spend_date:(new Date).toISOString().slice(0,10)},editedItem:{},search:{y:(new Date).getFullYear(),m:(new Date).getMonth()+1},months:[],cates:["餐費","加油","水電"],rows:[],headers:[{text:"日期",value:"spend_date",width:"70"},{text:"項目",value:"note",width:"120"},{text:"支出",value:"expense",width:"70"}],loading:!1}},created:function(){this.monthData(),this.getDataYM()},methods:{editItem:function(e){this.dialog=!0,this.editedIndex=this.rows.indexOf(e),this.editedItem=Object.assign({},e)},getTotal:function(e){var t=Object.keys(e).reduce((function(t,a){return t+1*e[a].expense}),0),a=new Intl.NumberFormat("en-US",{currency:"USD"});return t=a.format(t),t},monthData:function(){for(var e=0;e<=12;e++)e<10&&(e="0"+e),this.months.push(e);var t=(new Date).getMonth()+1;t<10&&(t="0"+t),this.search.m=t},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.editedIndex>-1)){t.next=8;break}return a=Object(ie["e"])(le,"spends",e.editedItem.id),t.next=4,Object(ie["k"])(a,e.editedItem);case 4:Object.assign(e.rows[e.editedIndex],e.editedItem),e.$nextTick((function(){e.defaultItem.date="",e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1})),t.next=13;break;case 8:return t.next=10,Object(ie["b"])(Object(ie["c"])(le,"spends"),{spend_date:e.editedItem.spend_date,cate_name:e.editedItem.cate_name,note:e.editedItem.note,expense:e.editedItem.expense});case 10:n=t.sent,e.editedItem.id=n.id,e.rows.unshift(e.editedItem);case 13:e.dialog=!1;case 14:case"end":return t.stop()}}),t)})))()},deleteItem:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(confirm("確定刪除")){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(ie["d"])(Object(ie["e"])(le,"spends",e));case 4:a.rows.splice(t,1),a.editedItem=Object.assign({},a.defaultItem),a.editedIndex=-1,a.dialog=!1;case 8:case"end":return n.stop()}}),n)})))()},getDataYM:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rows=[],e.loading=!0,a=Object(ie["c"])(le,"spends"),n=Object(ie["j"])(a,Object(ie["i"])("expense","desc"),Object(ie["l"])("expense","!=",!1),Object(ie["h"])(10)),"00"!=e.search.m&&(n=Object(ie["j"])(a,Object(ie["l"])("expense","!=",!1),Object(ie["h"])(10))),t.next=7,Object(ie["f"])(n);case 7:r=t.sent,r.forEach((function(t){e.rows.push(Object(Oe["a"])(Object(Oe["a"])({},t.data()),{},{id:t.id}))})),e.loading=!1,console.log(e.rows);case 11:case"end":return t.stop()}}),t)})))()}}},ea=Xt,ta=a("cc20"),aa=Object(h["a"])(ea,Qt,Zt,!1,null,null,null),na=aa.exports;b()(aa,{VBtn:w["a"],VCard:z["a"],VCardText:H["b"],VCardTitle:H["c"],VChip:ta["a"],VCol:ve["a"],VContainer:S["a"],VDataTable:te["a"],VDialog:he["a"],VIcon:g["a"],VRow:fe["a"],VSelect:be["a"],VTextField:P["a"]});var ra=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-chip",{staticClass:"ma-2",attrs:{color:"orange",outlined:""}},[e._v(e._s(e.getTotal(e.rows)))]),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 lighten-2"},[e._v("編輯")]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"日期",type:"date"},model:{value:e.editedItem.spend_date,callback:function(t){e.$set(e.editedItem,"spend_date",t)},expression:"editedItem.spend_date"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"項目","hide-details":"auto"},model:{value:e.editedItem.note,callback:function(t){e.$set(e.editedItem,"note",t)},expression:"editedItem.note"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"金額","append-icon":"mdi-currency-usd",type:"number"},model:{value:e.editedItem.income,callback:function(t){e.$set(e.editedItem,"income",t)},expression:"editedItem.income"}})],1)],1)],1),a("v-row",{staticClass:"mb-6"},[a("v-col",{staticClass:"text-left"},[e.editedIndex>-1?a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(e.editedItem.id,e.editedIndex)}}},[e._v("mdi-delete")]):e._e()],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"white--text",attrs:{color:"green"},on:{click:e.save}},[e._v("儲存")])],1)],1)],1)],1)],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey"},on:{click:e.openDialog}},[e._v("新增")])],1),a("v-data-table",{attrs:{items:e.rows,headers:e.headers,loading:e.loading,"mobile-breakpoint":"300"},on:{"click:row":e.editItem}})],1)},sa=[],ia="incomes",ca={data:function(){return{rows:[],headers:[{text:"日期",value:"spend_date",width:"120"},{text:"項目",value:"note",width:"150"},{text:"金額",value:"income",width:"90"}],loading:!1,dialog:!1,defaultItem:{note:"",income:"",spend_date:(new Date).toISOString().slice(0,10)},editedItem:{note:"",income:"",spend_date:(new Date).toISOString().slice(0,10)},editedIndex:-1}},created:function(){this.getData()},methods:{editItem:function(e){this.dialog=!0,this.editedIndex=this.rows.indexOf(e),this.editedItem=Object.assign({},e)},deleteItem:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(confirm("確定刪除")){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(ie["d"])(Object(ie["e"])(le,ia,e));case 4:a.rows.splice(t,1),a.editedItem=Object.assign({},a.defaultItem),a.editedIndex=-1,a.dialog=!1;case 8:case"end":return n.stop()}}),n)})))()},getTotal:function(e){var t=Object.keys(e).reduce((function(t,a){return t+1*e[a].income}),0),a=new Intl.NumberFormat("en-US",{currency:"USD"});return t=a.format(t),t},getData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rows=[],e.loading=!0,a=Object(ie["c"])(le,ia),n=Object(ie["j"])(a,Object(ie["l"])("income","!=",0),Object(ie["i"])("income")),t.next=6,Object(ie["f"])(n);case 6:r=t.sent,r.forEach((function(t){e.rows.push(Object(Oe["a"])(Object(Oe["a"])({},t.data()),{},{id:t.id}))})),e.loading=!1,console.log(e.rows);case 10:case"end":return t.stop()}}),t)})))()},openDialog:function(){this.editedItem=Object.assign({},this.defaultItem),this.dialog=!0},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.editedIndex>-1)){t.next=9;break}return a=Object(ie["e"])(le,ia,e.editedItem.id),n={spend_date:e.editedItem.spend_date,note:e.editedItem.note,income:1*e.editedItem.income},t.next=5,Object(ie["k"])(a,n);case 5:Object.assign(e.rows[e.editedIndex],e.editedItem),e.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1})),t.next=15;break;case 9:return console.log(e.editedItem),t.next=12,Object(ie["b"])(Object(ie["c"])(le,ia),{spend_date:e.editedItem.spend_date,note:e.editedItem.note,income:1*e.editedItem.income});case 12:r=t.sent,e.editedItem.id=r.id,e.rows.unshift(e.editedItem);case 15:e.dialog=!1;case 16:case"end":return t.stop()}}),t)})))()}}},oa=ca,da=Object(h["a"])(oa,ra,sa,!1,null,null,null),la=da.exports;b()(da,{VBtn:w["a"],VCard:z["a"],VCardText:H["b"],VCardTitle:H["c"],VChip:ta["a"],VCol:ve["a"],VContainer:S["a"],VDataTable:te["a"],VDialog:he["a"],VIcon:g["a"],VRow:fe["a"],VTextField:P["a"]});var ua=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("Score")])},ma=[],pa={},va=pa,ha=Object(h["a"])(va,ua,ma,!1,null,null,null),fa=ha.exports,ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",[e._v(" "+e._s(this.id)+" "),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 grey lighten-2"},[e._v("股票編輯")]),a("v-card-text",[a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"日期",type:"date"},model:{value:e.editRow.date,callback:function(t){e.$set(e.editRow,"date",t)},expression:"editRow.date"}})],1),a("v-col",[a("v-text-field",{attrs:{label:"名稱"},model:{value:e.editRow.stockName,callback:function(t){e.$set(e.editRow,"stockName",t)},expression:"editRow.stockName"}})],1),a("v-col",[a("v-text-field",{attrs:{label:"股數",type:"number"},model:{value:e.editRow.qty,callback:function(t){e.$set(e.editRow,"qty",t)},expression:"editRow.qty"}})],1),a("v-col",[a("v-text-field",{attrs:{label:"單價",type:"number"},model:{value:e.editRow.price,callback:function(t){e.$set(e.editRow,"price",t)},expression:"editRow.price"}})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:e.cancel}},[e._v("取消")]),a("v-btn",{staticClass:"white--text",attrs:{color:"green"},on:{click:e.save}},[e._v("儲存")])],1)],1)],1),a("v-form",[a("v-row",{staticClass:"mb-6"},[a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{color:"cyan"},on:{click:e.openDialog}},[e._v("新增")])],1),a("v-col",{attrs:{cols:"6",md:"4"}},[a("v-alert",{attrs:{border:"right",type:"info","colored-border":"",elevation:"2"}},[a("h3",{staticClass:"text-center"},[e._v("合計: "+e._s(e.total))])])],1)],1)],1),a("v-data-table",{attrs:{headers:e.headers,items:e.rows},scopedSlots:e._u([{key:"item.date",fn:function(t){var a=t.item;return[e._v(e._s(a.date.toDate().toISOString().slice(0,10)))]}},{key:"item.stockName",fn:function(t){var n=t.item;return[a("router-link",{attrs:{to:{name:"StockTransaction",params:{id:n.id}}}},[e._v(e._s(n.stockName))])]}},{key:"item.type",fn:function(t){var n=t.item;return[a("v-chip",{attrs:{dark:"",color:e.getTypeColor(n)}},[e._v(e._s(e.getType(n)))])]}},{key:"item.amt",fn:function(t){var a=t.item;return[e._v(e._s(a.price*a.qty))]}},{key:"item.edit",fn:function(t){var n=t.item;return[a("v-icon",{on:{click:function(t){return e.edit(n)}}},[e._v("mdi-pencil")])]}},{key:"item.del",fn:function(t){var n=t.item;return[a("v-icon",{on:{click:function(t){return e.destory(n)}}},[e._v("mdi-delete")])]}}])})],1)],1)},xa=[],wa="stockTransaction",ga={data:function(){return{dialog:!1,id:this.$route.params.id,rows:[],editRow:{date:(new Date).toISOString().slice(0,10)},headers:[{text:"",value:"del"},{text:"日期",value:"date"},{text:"交易類別",value:"type"},{text:"名稱",value:"stockName"},{text:"股數",value:"qty"},{text:"單價",value:"price"},{text:"小計",value:"amt"},{text:"",value:"edit"}],editedIndex:-1}},created:function(){this.getMoney()},computed:{total:function(){var e=0;return this.rows.forEach((function(t){e+=t.price*t.qty})),e}},methods:{cancel:function(){this.dialog=!1,this.editRow={},this.editedIndex=-1},getType:function(e){return e.qty>0?"買進":"賣出"},getTypeColor:function(e){return e.qty>0?"orange":"green"},openDialog:function(){this.dialog=!0},edit:function(e){console.log(e.date),this.editedIndex=this.rows.indexOf(e),this.editRow=Object.assign({},e),console.log(this.editRow),this.editRow.date=this.editRow.date.toDate().toISOString().slice(0,10),console.log(this.editRow),this.dialog=!0},save:function(){this.editedIndex>-1?this.update():this.create()},create:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=ie["a"].fromDate(new Date(e.editRow.date)),t.next=3,Object(ie["b"])(Object(ie["c"])(le,wa),{date:a,stockName:e.editRow.stockName,qty:e.editRow.qty,price:e.editRow.price}).then((function(t){e.editRow.id=t.id,e.dialog=!1,e.editRow.date=a,e.rows.unshift(e.editRow),e.editRow={},e.editRow.date=(new Date).toISOString().slice(0,10),console.log(t.id)}));case 3:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.editRow.date=ie["a"].fromDate(new Date(e.editRow.date)),a=Object(ie["e"])(le,wa,e.editRow.id),t.next=4,Object(ie["k"])(a,e.editRow).then((function(){Object.assign(e.rows[e.editedIndex],e.editRow),e.dialog=!1,e.editRow={},e.editedIndex=-1}));case 4:case"end":return t.stop()}}),t)})))()},destory:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.editedIndex=t.rows.indexOf(e),a.next=3,Object(ie["d"])(Object(ie["e"])(le,wa,e.id)).then(t.rows.splice(t.editedIndex,1));case 3:case"end":return a.stop()}}),a)})))()},del:function(e){console.log(e.id)},getMoney:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="",null!=e.id?(a=Object(ie["j"])(Object(ie["c"])(le,wa),Object(ie["l"])("stockID","==",e.id)),console.log("ddd")):a=Object(ie["c"])(le,wa),t.next=4,Object(ie["f"])(a);case 4:n=t.sent,r=n.docs,r.forEach((function(t){var a=t.data();a.id=t.id,e.rows.push(a)}));case 7:case"end":return t.stop()}}),t)})))()}}},Ia=ga,Oa=(a("c348"),a("ce7e")),ja=a("4bd4"),_a=Object(h["a"])(Ia,ba,xa,!1,null,null,null),ka=_a.exports;b()(_a,{VAlert:W["a"],VBtn:w["a"],VCard:z["a"],VCardActions:H["a"],VCardText:H["b"],VCardTitle:H["c"],VChip:ta["a"],VCol:ve["a"],VContainer:S["a"],VDataTable:te["a"],VDialog:he["a"],VDivider:Oa["a"],VForm:ja["a"],VIcon:g["a"],VRow:fe["a"],VSpacer:k["a"],VTextField:P["a"]});var ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",e._l(e.cardData,(function(t){return a("v-col",{key:t.m,attrs:{cols:"6"}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400"}},[a("v-list-item",{attrs:{"two-line":""}},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"text-h5"},[e._v(e._s(t.m)+"月支出")])],1)],1),a("v-card-text",[a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"text-h2",attrs:{cols:"8"}},[e._v(e._s(e.numFormat(t.total)))]),a("v-col",{attrs:{cols:"4"}},[a("v-icon",{attrs:{large:"",color:"green darken-2"}},[e._v("mdi-domain")])],1)],1)],1),e._l(t.detail,(function(t){return a("v-list-item",{key:t.cate},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-home-analytics")])],1),a("v-list-item-subtitle",{staticClass:"subtitle-1"},[e._v(e._s(t.cate)+" : "+e._s(e.numFormat(t.amt)))])],1)}))],2)],1)})),1)],1)},Ca=[],Ra=(a("2ca0"),{data:function(){return{rows:[],rowsTotal:[],cates:[],cardData:[],months:["06","07"],labels:["日","一","TU","WED","TH","FR","SA"],labels2:["180","414","TU","WED","TH","FR","SA"],time:0,forecast:[{day:"180",icon:"mdi-white-balance-sunny",temp:"Tue"},{day:"Wednesday",icon:"mdi-white-balance-sunny",temp:"414"},{day:"Thursday",icon:"mdi-cloud",temp:"314"}]}},created:function(){this.getCates(),this.getData()},methods:{numFormat:function(e){var t=new Intl.NumberFormat("en-US",{currency:"USD"});return t.format(e)},getCates:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(ie["c"])(le,"cates"),t.next=3,Object(ie["f"])(a);case 3:n=t.sent,n.forEach((function(t){e.cates.push(t.data().name)}));case 5:case"end":return t.stop()}}),t)})))()},getData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i,c,o,d,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[],n=Object(ie["c"])(le,"expenses"),r="2022",s="01",i="12",c=Object(ie["j"])(n,Object(ie["l"])("spend_date",">=",r+"-"+s+"-01"),Object(ie["l"])("spend_date","<=",r+"-"+i+"-31")),t.next=8,Object(ie["f"])(c);case 8:for(o=t.sent,o.forEach((function(e){a.push(Object(Oe["a"])({},e.data()))})),a=a.filter((function(e){return"轉帳"!=e.trans_type})),a=a.filter((function(e){return"投資"!=e.trans_type})),d=[],l=1;l<=12;l++)l<10?d.push("0"+l):d.push(l);u=[],d.forEach((function(t){var n=a.filter((function(e){return e.spend_date.startsWith("2022-"+t)})),r=0;n.forEach((function(e){r+=1*e.expense}));var s=[];e.cates.forEach((function(e){console.log(e);var t=n.filter((function(t){return t.cate_name==e})),a=0;t.forEach((function(e){a+=1*e.expense})),a>0&&s.push({cate:e,amt:a}),console.log(t)})),r>0&&u.unshift({m:1*t,total:r,detail:s})})),e.cardData=u,console.log(u);case 18:case"end":return t.stop()}}),t)})))()},getDataYM:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,s,i,c,o,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=[],s=Object(ie["c"])(le,"expenses"),i=Object(ie["j"])(s,Object(ie["l"])("spend_date",">=",e+"-"+t+"-01"),Object(ie["l"])("spend_date","<=",e+"-"+t+"-31")),n.next=5,Object(ie["f"])(i);case 5:c=n.sent,c.forEach((function(e){r.push(Object(Oe["a"])({},e.data()))})),r=r.filter((function(e){return"轉帳"!=e.trans_type})),r=r.filter((function(e){return"投資"!=e.trans_type})),o=0,r.forEach((function(e){o+=1*e.expense})),d=new Intl.NumberFormat("en-US",{currency:"USD"}),o=d.format(o),a.rowsTotal.push(o),console.log(o);case 15:case"end":return n.stop()}}),n)})))()},getDataYM2:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="2022",n="07",r=Object(ie["c"])(le,"expenses"),s=Object(ie["j"])(r,Object(ie["l"])("spend_date",">=",a+"-"+n+"-01"),Object(ie["l"])("spend_date","<=",a+"-"+n+"-31")),t.next=6,Object(ie["f"])(s);case 6:i=t.sent,i.forEach((function(t){e.rows.push(Object(Oe["a"])({},t.data()))})),e.rows=e.rows.filter((function(e){return"轉帳"!=e.trans_type})),e.rows=e.rows.filter((function(e){return"投資"!=e.trans_type})),c=0,e.rows.forEach((function(e){c+=1*e.expense})),console.log(e.rows),e.rowsTotal.push(c),console.log(c);case 15:case"end":return t.stop()}}),t)})))()},getTotal:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}}),Da=Ra,Va=a("34c3"),Ta=Object(h["a"])(Da,ya,Ca,!1,null,null,null),Sa=Ta.exports;b()(Ta,{VCard:z["a"],VCardText:H["b"],VCol:ve["a"],VIcon:g["a"],VListItem:O["a"],VListItemContent:j["a"],VListItemIcon:Va["a"],VListItemSubtitle:j["b"],VListItemTitle:j["c"],VRow:fe["a"]});var Ea=new Y["a"]({mode:"history",routes:[{path:"/home",component:Sa},{name:"Score",path:"/score",component:fa},{name:"SpendCate",path:"/spend/cate",component:Gt},{name:"Spend",path:"/spend",component:we},{name:"Account",path:"/account",component:Ce},{name:"Cate",path:"/cate",component:$e},{name:"Balance",path:"/views/balance",component:Xe},{name:"Expense",path:"/expense",component:it},{name:"ExpenseDetail",path:"/expense/detail",component:vt},{name:"ExpenseGas",path:"/expense/gas",component:Rt},{name:"ExpenseDada",path:"/expense/dada",component:Kt},{name:"ExpenseTab",path:"/expense-tab",component:qt,meta:{requiresAuth:!0}},{name:"SpendTab",path:"/spend-tab",component:na},{name:"CashIn",path:"/cash-in",component:la},{name:"Login",path:"/login",component:G},{name:"Stock",path:"/stock",component:ne},{name:"StockTransaction",path:"/stock-transaction/:id",component:ka},{name:"StockTransactionAll",path:"/stock-transaction",meta:{requiresAuth:!0},component:ka}]});Ea.beforeEach((function(e,t,a){var n=e.matched.some((function(e){return e.meta.requiresAuth})),r=Object(l["a"])().currentUser;n&&!r?a("/login"):a()}));var $a=Ea,Ma=a("2f62");n["a"].use(Ma["a"]);var Ba,Fa={user:null},Ya=new Ma["a"].Store({state:Fa,getters:{user:function(e){return e.user}},acions:{user:function(e,t){e.commit("user",t)}},mutations:{user:function(e,t){e.user=t}}}),qa=Ya;n["a"].config.productionTip=!1,n["a"].use(Y["a"]),Object(l["a"])().onAuthStateChanged((function(){Ba||(Ba=new n["a"]({vuetify:F,router:$a,store:qa,render:function(e){return e(M)}}).$mount("#app"))}))},c348:function(e,t,a){"use strict";a("0af9")}});
//# sourceMappingURL=app.bfac092d.js.map